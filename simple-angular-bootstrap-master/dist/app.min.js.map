{"version":3,"sources":["app.min.js"],"names":["MyApp","angular","module","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","controllerAs","$scope","$stateParams","$timeout","chatName","firebase","database","ref","on","snapshot","messages","val","sendMessage","timestamp","Date","now","push","member","username","message","chatmessage","set","lastMessage","messager","directive","freshChats","filter","toggleFilter"],"mappings":"AAAA,GAAIA,OAAQC,QAAQC,OAAO,SAAU,aAErCF,OAAMG,QAAQ,iBAAkB,qBAAsB,SAASC,EAAgBC,GAC7EA,EAAmBC,UAAU,SAE7BF,EACGG,MAAM,QACLC,IAAK,IACLC,YAAa,2BACbC,WAAY,iBACZC,aAAc,SAEfJ,MAAM,aACLC,IAAK,OACLC,YAAa,6BAEdF,MAAM,cACLC,IAAK,QACLC,YAAa,+BAEdF,MAAM,QACLC,IAAK,QACLC,YAAa,6BAEjBF,MAAM,aACNC,IAAK,aACLC,YAAa,+BACZC,WAAY,iBACZC,aAAc,YAwDjBX,MAAMU,WAAW,kBAAmB,SAAU,eAAgB,WAAY,SAASE,EAAQC,EAAcC,GACrGD,IACFD,EAAOG,SAAWF,EAAaE,SACT,IAAnBH,EAAOG,UACTC,SAASC,WAAWC,IAAI,aAAeN,EAAOG,UAAUI,GAAG,QAAS,SAASC,GAC5EN,EAAS,WACRF,EAAOS,SAAWD,EAASE,OACzB,MAONV,EAAOW,YAAc,WAEpB,GAAsB,IAAnBX,EAAOG,SAAe,CACxB,GAAIS,GAAYC,KAAKC,KACrBV,UAASC,WAAWC,IAAI,aAAeN,EAAOG,UAAUY,MACvDC,OAAQhB,EAAOiB,SACfC,QAASlB,EAAOmB,YAChBP,UAAWA,IAEZR,SAASC,WAAWC,IAAI,UAAYN,EAAOG,UAAUiB,KACpDC,YAAarB,EAAOmB,YACpBG,SAAUtB,EAAOiB,SACjBL,UAAWA,SAMfxB,MAAMmC,UAAU,SAAU,WACxB,OACE1B,YAAa,+CAIjBT,MAAMU,WAAW,kBAAmB,cAIpCV,MAAMU,WAAW,kBAAmB,SAAU,WAAY,SAASE,EAAQE,GAC1EE,SAASC,WAAWC,IAAI,WAAWC,GAAG,QAAS,SAASC,GACvDN,EAAS,WACRF,EAAOwB,WAAahB,EAASE,OAC3B,QAILtB,MAAMU,WAAW,mBAAoB,SAAU,SAASE,GACtDA,EAAOyB,QAAS,EAChBzB,EAAO0B,aAAe,WACpB1B,EAAOyB,QAAUzB,EAAOyB,WAI5BrC,MAAMU,WAAW,kBAAmB","file":"app.min.js","sourcesContent":["var MyApp = angular.module(\"MyApp\", [\"ui.router\"]);\n\nMyApp.config([\"$stateProvider\", \"$urlRouterProvider\", function($stateProvider, $urlRouterProvider) {\n  $urlRouterProvider.otherwise(\"/home\");\n\n  $stateProvider\n    .state(\"main\", {\n      url: \"/\",\n      templateUrl: \"templates/main/main.html\",\n      controller: \"MainController\",\n      controllerAs: \"main\"\n    })\n    .state(\"main.home\", {\n      url: \"home\",\n      templateUrl: \"templates/home/home.html\",\n    })\n    .state(\"main.login\", {\n      url: \"login\",\n      templateUrl: \"templates/login/login.html\",\n    })\n    .state(\"chat\", {\n      url: \"/chat\",\n      templateUrl: \"templates/main/main.html\"\n    })\n\t.state(\"chat.room\",{\n\t\turl: \"/:chatName\",\n\t\ttemplateUrl: \"templates/chat/chatroom.html\",\n\t  controller: \"ChatController\",\n\t  controllerAs: \"chat\"\r\n\t})\n\t/*\n    .state(\"stuff\", {\n      url: \"/stuff\",\n      templateUrl: \"templates/stuff/stuff.html\",\n      controller: \"StuffController\",\n      controllerAs: \"stuffCtrl\"\n    })*/\n}]);\n\n/*\nMyApp.service(\"ApiService\", function() {\n\n  this.syncMethod = function() {\n    return 0;\n  }\n\n  this.getThings = function() {\n    return $http.get(\"/thing\")\n      .then(function (response) {\n        return response.data;\n      })\n      .catch(function (err) {\n        console.error(\"Error ApiService getThings \", err);\n        return {};\n      })\n  }\n\n})\nMyApp.service(\"FirebaseService\", function() {\n\t\n\tthis.database = firebase.database();\n\t\n\tthis.writeChat = function(chatId, chatName, lastMessage, timestamp){\n\t\tthis.database.ref('chats/' + chatId).set({\n\t\t\tname: chatName,\n\t\t\tlastMessage: lastMessage,\n\t\t\ttimestamp: timestamp\r\n\t\t})\r\n\t};\n\t\n\tthis.writeMember = function(chatId, memberName){\n\t\tthis.database.ref('members/' + chatId + '/' + memberName).set(true);\r\n\t};\n\t\n\tthis.writeMessage = function(chatId, message, member, timestamp){\n\t\tthis.database.ref('messages/' + chatId).push({\n\t\t\tmember: member,\n\t\t\tmessage: message,\n\t\t\ttimestamp: timestamp\r\n\t\t})\r\n\t};\n})\n\n*/\nMyApp.controller(\"ChatController\", [\"$scope\", \"$stateParams\", \"$timeout\", function($scope, $stateParams, $timeout) {\r\n\tif($stateParams){\r\n\t\t$scope.chatName = $stateParams.chatName;\r\n\t\tif($scope.chatName != \"\"){\r\n\t\t\tfirebase.database().ref('/messages/' + $scope.chatName).on('value', function(snapshot){\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t$scope.messages = snapshot.val();\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t$scope.sendMessage = function(){\r\n\t\t//console.log(\"user: \"+ $scope.username + \"  msg: \" + $scope.chatmessage + \"  time: \" + Date.now());\r\n\t\tif($scope.chatName != \"\"){\r\n\t\t\tvar timestamp = Date.now();\r\n\t\t\tfirebase.database().ref('/messages/' + $scope.chatName).push({\r\n\t\t\t\tmember: $scope.username,\r\n\t\t\t\tmessage: $scope.chatmessage,\r\n\t\t\t\ttimestamp: timestamp\r\n\t\t\t});\r\n\t\t\tfirebase.database().ref('/chats/' + $scope.chatName).set({\r\n\t\t\t\tlastMessage: $scope.chatmessage,\r\n\t\t\t\tmessager: $scope.username,\r\n\t\t\t\ttimestamp: timestamp\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}\r\n}])\nMyApp.directive(\"navTop\", function() {\n  return {\n    templateUrl: \"templates/layout-directives/nav-top2.html\",\n  };\n});\n\nMyApp.controller(\"LoginController\", function() {\n\n})\n\nMyApp.controller(\"MainController\", [\"$scope\", \"$timeout\", function($scope, $timeout) {\n\tfirebase.database().ref('/chats/').on('value', function(snapshot){\n\t\t$timeout(function() {\n\t\t\t$scope.freshChats = snapshot.val();\r\n\t\t}, 0);\r\n\t});\n}])\n\nMyApp.controller(\"OtherController\", [\"$scope\", function($scope) {\n  $scope.filter = true;\n  $scope.toggleFilter = function() {\n    $scope.filter = !$scope.filter;\n  }\n}])\n\nMyApp.controller(\"StuffController\", function() {\n\n})\n"],"sourceRoot":"/source/"}